## Synopsis

This is a Bash script that creates an optimized mirrorlist for Arch Linux based on the text file generated by the Arch Linux [Mirrorlist Updater](https://www.archlinux.org/mirrorlist/)

## Usage

To generate the new mirrorlist, simply navigate to the directory containing the script and execute `$ ./polish.sh [URL]`

**URL** is any URL that may be generated by the [Mirrorlist Updater](https://www.archlinux.org/mirrorlist/) web UI. For example, `https://www.archlinux.org/mirrorlist/all/https/` will attempt to optimize a list of all https mirrors, or `https://www.archlinux.org/mirrorlist/?country=CA&protocol=https&ip_version=4&use_mirror_status=on` will attempt to optimize a list of IPv4 https mirrors in Canada, and will use mirror status information.

If you do not specify **URL**, the script will look for IPv4 https servers in North America and a few other countries, and will use the mirror status.

#### Note

The more mirrors that are in the original list, the longer the script will take to run, so it's best to minimize the length of the initial list. This can be accomplished by, using the [Mirrorlist Updater](https://www.archlinux.org/mirrorlist/) and only selecting the  the parameters that interest you and nearby locations, or locations that you know to have good throughput.

## Installation

Running the script will produce a file "mirrorlist" in your home directory. You can either replace /etc/pacman.d/mirrorlist with this mirrorlist, or edit /etc/pacman.conf to refer to this mirror list if you prefer to keep it somewhere else.

### Dependencies

This script uses the grep replacement program, ack, which is available in the Arch Linux community repo. To install, simply run `# pacman -S ack`.

## Motivation

The mirrorlist that is included with Arch Linux and updated with system updates lists many possible servers, many of which may be very slow for you, and all of which use http (as opposed to https). Pacman simply iterates through this long list of servers, trying each one in turn, using the first one that works. Polished-metal optimizes this list by only specifying those mirrors that may interest you (based on the URL), and ordering them from fastest to slowest.

## How It Works

In brief, the script downloads the mirrorlist from the Mirrorlist updater. For each server found in that list, ping is used approximate throughput. The generated list orders the mirrors with the fastest servers first, and leaves out any whose replies were too slow.

## Contributors

Thanks to all Arch Linux developers, contributors, testers, and users!

## License

GPLv3
